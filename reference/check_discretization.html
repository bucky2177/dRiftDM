<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check time/space discretization via reference comparison — check_discretization • dRiftDM</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check time/space discretization via reference comparison — check_discretization"><meta name="description" content="check_discretization() helps you choose or check time (dt) and space
(dx) discretization settings. It computes a high-precision reference
solution of the model's PDFs with dt_ref/dx_ref, and then compares the
reference PDFs to the discretization settings of the supplied object, using
the Hellinger distance per condition. Smaller distances indicate closer
agreement with the reference — i.e., a sufficiently fine grid.
There are not yet overall and officially published recommendations on how
large the Hellinger distance can be without affecting model precision, and
this very likely will depend on the model itself. Based on some preliminary
simulations using dmc_dm(), we would recommend trying to keep the
Hellinger Distance at best below 10 percent. However, we also observed for
extreme parameter values that the Hellinger distance can be even larger
without sacrificing the qualitative model behavior, and vice versa! It is
thus best to iterate between plotting model predictions and calculating the
Hellinger Distance, to ensure that you can best interpret this quantity for
your model at hand. Furthermore, we recommend to run parameter recoveries
using simulate_data() and estimate_dm(), to check if
you can recover data generated under your model with fine discretization
using that same model with coarse discretization."><meta property="og:description" content="check_discretization() helps you choose or check time (dt) and space
(dx) discretization settings. It computes a high-precision reference
solution of the model's PDFs with dt_ref/dx_ref, and then compares the
reference PDFs to the discretization settings of the supplied object, using
the Hellinger distance per condition. Smaller distances indicate closer
agreement with the reference — i.e., a sufficiently fine grid.
There are not yet overall and officially published recommendations on how
large the Hellinger distance can be without affecting model precision, and
this very likely will depend on the model itself. Based on some preliminary
simulations using dmc_dm(), we would recommend trying to keep the
Hellinger Distance at best below 10 percent. However, we also observed for
extreme parameter values that the Hellinger distance can be even larger
without sacrificing the qualitative model behavior, and vice versa! It is
thus best to iterate between plotting model predictions and calculating the
Hellinger Distance, to ensure that you can best interpret this quantity for
your model at hand. Furthermore, we recommend to run parameter recoveries
using simulate_data() and estimate_dm(), to check if
you can recover data generated under your model with fine discretization
using that same model with coarse discretization."><meta property="og:image" content="https://bucky2177.github.io/dRiftDM/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dRiftDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/dRiftDM.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/convert_dmc_parameters.html">How to Convert DMC's parameters</a></li>
    <li><a class="dropdown-item" href="../articles/customize_ddms.html">How To Customize DDMs</a></li>
    <li><a class="dropdown-item" href="../articles/model_recovery.html">How To Perform a Model Recovery</a></li>
    <li><a class="dropdown-item" href="../articles/predictions_simple_ddm.html">Core DDM Parameters: Impact on RTs and Accuracy</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bucky2177/dRiftDM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Check time/space discretization via reference comparison</h1>
      <small class="dont-index">Source: <a href="https://github.com/bucky2177/dRiftDM/blob/v0.3.1/R/core_tools.R" class="external-link"><code>R/core_tools.R</code></a></small>
      <div class="d-none name"><code>check_discretization.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>check_discretization()</code> helps you choose or check time (<code>dt</code>) and space
(<code>dx</code>) discretization settings. It computes a high-precision <em>reference</em>
solution of the model's PDFs with <code>dt_ref</code>/<code>dx_ref</code>, and then compares the
reference PDFs to the discretization settings of the supplied object, using
the Hellinger distance per condition. Smaller distances indicate closer
agreement with the reference — i.e., a sufficiently fine grid.</p>
<p>There are not yet overall and officially published recommendations on how
large the Hellinger distance can be without affecting model precision, and
this very likely will depend on the model itself. Based on some preliminary
simulations using <code><a href="dmc_dm.html">dmc_dm()</a></code>, we would recommend trying to keep the
Hellinger Distance at best below 10 percent. However, we also observed for
extreme parameter values that the Hellinger distance can be even larger
without sacrificing the qualitative model behavior, and vice versa! It is
thus best to iterate between plotting model predictions and calculating the
Hellinger Distance, to ensure that you can best interpret this quantity for
your model at hand. Furthermore, we recommend to run parameter recoveries
using <code><a href="simulate_data.html">simulate_data()</a></code> and <code><a href="estimate_dm.html">estimate_dm()</a></code>, to check if
you can recover data generated under your model with fine discretization
using that same model with coarse discretization.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_discretization</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'drift_dm'</span></span>
<span><span class="fu">check_discretization</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  dt_ref <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>  dx_ref <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>  round_digits <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'fits_ids_dm'</span></span>
<span><span class="fu">check_discretization</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'fits_agg_dm'</span></span>
<span><span class="fu">check_discretization</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>a <a href="drift_dm.html">drift_dm</a>, <code>fits_agg_dm</code>, or <code>fits_ids_dm</code> object.
(the latter two are returned by <code><a href="estimate_dm.html">estimate_dm()</a></code>)</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>further arguments passed forward to the respective method.</p></dd>


<dt id="arg-dt-ref-dx-ref">dt_ref, dx_ref<a class="anchor" aria-label="anchor" href="#arg-dt-ref-dx-ref"></a></dt>
<dd><p>numeric scalars, providing a fine time or space step
size for the reference solution. Defaults to <code>0.001</code>.</p></dd>


<dt id="arg-round-digits">round_digits<a class="anchor" aria-label="anchor" href="#arg-round-digits"></a></dt>
<dd><p>number of decimal places to which the final Hellinger
distances are rounded (default: <code>5</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a named numeric vector of Hellinger distances (one per condition)
if <code>object</code> is of type <a href="drift_dm.html">drift_dm</a> or <code>fits_agg_dm</code>. A <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a>
of Hellinger distances across IDs and conditions if <code>object</code> is of type
<code>fits_ids_dm</code>. Hellinger distances are in <code>[0, 1]</code>, where <code>0</code> means
identical to the reference.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Under the hood, for each condition, we concatenate the lower- and upper-
boundary PDFs (<code>pdf_l</code>, <code>pdf_u</code>), interpolate the model PDFs to a time space
matching with the reference PDFs, and then compute the Hellinger distance:
\(H(p,q) = \sqrt{1 - \int \sqrt{p(t)\,q(t)}\,dt}\)</p>
<p>There are not yet overall, officially published recommendations on how large
the Hellinger distance can be without affecting model precision, and this may
even depend on the specific model. Based on preliminary simulations, we
recommend trying to keep the average Hellinger distance below 5\<!-- %. --></p>
<p>The reference discretizations (<code>dt_ref/dx_ref</code>) must be at least as fine as
the object's current discretization settings (<code>dt_model/dx_model</code>). If
<code>dt_model &lt; dt_ref</code> or <code>dx_model &lt; dx_ref</code>, an error is raised because the
“reference” would not be the finest solution.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="estimate_dm.html">estimate_dm()</a></code>, <code><a href="trapz.html">trapz()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example:</span></span></span>
<span class="r-in"><span><span class="va">my_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="ratcliff_dm.html">ratcliff_dm</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Assess current (dt=0.0075, dx=0.02) against a fine reference:</span></span></span>
<span class="r-in"><span><span class="fu">check_discretization</span><span class="op">(</span><span class="va">my_model</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   null </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.0165 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If distances are near zero across conditions, the current grid is adequate.</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Valentin Koob, Thomas Richter, Markus Janczyk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

