<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate Trajectories/Traces of a Model — simulate_traces • dRiftDM</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate Trajectories/Traces of a Model — simulate_traces"><meta name="description" content="Simulates single trajectories/traces of a model
(i.e., evidence accumulation processes) using forward Euler.
Might come in handy when exploring the model's behavior or when
creating figures (see also plot.traces_dm_list)"><meta property="og:description" content="Simulates single trajectories/traces of a model
(i.e., evidence accumulation processes) using forward Euler.
Might come in handy when exploring the model's behavior or when
creating figures (see also plot.traces_dm_list)"><meta property="og:image" content="https://bucky2177.github.io/dRiftDM/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dRiftDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/dRiftDM.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/convert_dmc_parameters.html">How to Convert DMC's parameters</a></li>
    <li><a class="dropdown-item" href="../articles/customize_ddms.html">How To Customize DDMs</a></li>
    <li><a class="dropdown-item" href="../articles/model_recovery.html">How To Perform a Model Recovery</a></li>
    <li><a class="dropdown-item" href="../articles/predictions_simple_ddm.html">Core DDM Parameters: Impact on RTs and Accuracy</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bucky2177/dRiftDM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate Trajectories/Traces of a Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/bucky2177/dRiftDM/blob/v0.3.1/R/core_dm.R" class="external-link"><code>R/core_dm.R</code></a>, <a href="https://github.com/bucky2177/dRiftDM/blob/v0.3.1/R/formatting_traces_dm.R" class="external-link"><code>R/formatting_traces_dm.R</code></a></small>
      <div class="d-none name"><code>simulate_traces.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Simulates single trajectories/traces of a model
(i.e., evidence accumulation processes) using forward Euler.</p>
<p>Might come in handy when exploring the model's behavior or when
creating figures (see also <a href="plot.traces_dm_list.html">plot.traces_dm_list</a>)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simulate_traces</span><span class="op">(</span><span class="va">object</span>, <span class="va">k</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'drift_dm'</span></span>
<span><span class="fu">simulate_traces</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">k</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  conds <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_x <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sigma <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unpack <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'fits_ids_dm'</span></span>
<span><span class="fu">simulate_traces</span><span class="op">(</span><span class="va">object</span>, <span class="va">k</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'fits_agg_dm'</span></span>
<span><span class="fu">simulate_traces</span><span class="op">(</span><span class="va">object</span>, <span class="va">k</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'traces_dm_list'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, round_digits <span class="op">=</span> <span class="fu"><a href="defaults.html">drift_dm_default_rounding</a></span><span class="op">(</span><span class="op">)</span>, print_steps <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'traces_dm'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  round_digits <span class="op">=</span> <span class="fu"><a href="defaults.html">drift_dm_default_rounding</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  print_steps <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  print_k <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>an object of type <a href="drift_dm.html">drift_dm</a>, <code>fits_ids_dm</code>, or
<code>fits_agg_dm</code> (see <code><a href="estimate_dm.html">estimate_dm()</a></code>).</p></dd>


<dt id="arg-k">k<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>numeric, the number of traces to simulate per condition. Can be a
named numeric vector, to specify different number of traces per condition.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments passed forward to the respective method.</p></dd>


<dt id="arg-conds">conds<a class="anchor" aria-label="anchor" href="#arg-conds"></a></dt>
<dd><p>optional character vector, conditions for which traces shall be
simulated. If <code>NULL</code>, then traces for all conditions are simulated.</p></dd>


<dt id="arg-add-x">add_x<a class="anchor" aria-label="anchor" href="#arg-add-x"></a></dt>
<dd><p>logical, indicating whether traces should contain a
variable starting point. If <code>TRUE</code>, samples from <code>x_fun</code> (see
<a href="comp_vals.html">comp_vals</a>) are added to each trace. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-sigma">sigma<a class="anchor" aria-label="anchor" href="#arg-sigma"></a></dt>
<dd><p>optional numeric, providing a value &gt;= 0 for the diffusion
constant "sigma" to temporally override <a href="prms_solve.html">prms_solve</a>. Useful for
exploring the model without noise.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>optional numerical, a seed for reproducible sampling</p></dd>


<dt id="arg-unpack">unpack<a class="anchor" aria-label="anchor" href="#arg-unpack"></a></dt>
<dd><p>logical, indicating if the traces shall be "unpacked" (see
also <a href="unpack_obj.html">unpack_obj</a> and the return value below).</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an object of type <code>traces_dm_list</code> or <code>traces_dm</code>, resulting from a
call to <code>simulate_traces</code>.</p></dd>


<dt id="arg-round-digits">round_digits<a class="anchor" aria-label="anchor" href="#arg-round-digits"></a></dt>
<dd><p>integer, indicating the number of decimal places (round)
to be used when printing out the traces (default is 3).</p></dd>


<dt id="arg-print-steps">print_steps<a class="anchor" aria-label="anchor" href="#arg-print-steps"></a></dt>
<dd><p>integer, indicating the number of steps to show when
printing out traces (default is 5).</p></dd>


<dt id="arg-print-k">print_k<a class="anchor" aria-label="anchor" href="#arg-print-k"></a></dt>
<dd><p>integer, indicating how many traces shall be shown when
printing out traces (default is 4).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>simulate_traces()</code> returns either an object of type <code>traces_dm_list</code>, or
directly a list of matrices across conditions, containing the traces
(if <code>unpack = TRUE</code>).
If the model has only one condition (and <code>unpack = TRUE</code>), then the matrix of
traces for this one condition is directly returned.</p>
<p>The returned list has as many entries as conditions requested. For example,
if only one condition is requested via the <code>conds</code> argument, then the list is
of length 1 (if <code>unpack = FALSE</code>). If <code>conds</code> is set to <code>NULL</code> (default),
then the list will have as many entries as conditions specified in the
supplied <code>object</code> (see also <a href="conds.html">conds</a>). If <code>unpack = FALSE</code>, the list
contains an additional attribute with the time space.</p>
<p>Each matrix of traces has <code>k</code> rows and <code>nt + 1</code> columns, stored as an
array of size (<code>k</code>, <code>nt + 1</code>). Note that <code>nt</code> is the number of steps in the
discretization of time; see <a href="drift_dm.html">drift_dm</a>. If <code>unpack = FALSE</code>, the
array is of type <code>traces_dm</code>. It contains some additional attributes about
the time space, the drift rate, the boundary, the added starting values,
if starting values were added, the original model class and parameters, the
boundary coding, and the solver settings.</p>
<p>The print methods <code>print.traces_dm_list()</code> and <code>print.traces_dm()</code> each
invisibly return the supplied object <code>x</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>simulate_traces()</code> is a generic function, applicable to objects of type
<a href="drift_dm.html">drift_dm</a> or <code>fits_ids_dm</code> (see <a href="load_fits_ids.html">load_fits_ids</a>).</p>
<p>For <a href="drift_dm.html">drift_dm</a> objects, <code>simulate_traces()</code> performs the simulation
on the parameter values currently set (see
<code><a href="coef.drift_dm.html">coef.drift_dm()</a></code>).</p>
<p>For <code>fits_ids_dm</code> objects, <code>simulate_traces()</code> first extracts the model and
all parameter values for all IDs (see <code><a href="coef.drift_dm.html">coef.fits_ids_dm()</a></code>).
Subsequently, simulations are based on the averaged parameter values.</p>
<p>The algorithm for simulating traces is forward euler. See
Richter et al. (2023)
 and
Ulrich et al. (2015)
 (Appendix A) for more
information.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Evidence values with traces beyond the boundary of the model are set to NA
before passing them back.</p>
<p>The reason why <code>simulate_traces</code> passes back an object of type
<code>traces_dm_list</code> (instead of simply a list of arrays) is to provide a
<a href="plot.traces_dm_list.html">plot.traces_dm_list</a> and print.traces_dm_list function.</p>
<p>Users can unpack the traces even after calling <code>simulate_traces()</code> using
<code><a href="unpack_obj.html">unpack_obj()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="unpack_obj.html">unpack_obj()</a></code>, <code><a href="plot.traces_dm_list.html">plot.traces_dm_list()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># get a pre-built model to demonstrate the function</span></span></span>
<span class="r-in"><span><span class="va">my_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="dmc_dm.html">dmc_dm</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">some_traces</span> <span class="op">&lt;-</span> <span class="fu">simulate_traces</span><span class="op">(</span><span class="va">my_model</span>, k <span class="op">=</span> <span class="fl">1</span>, seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">some_traces</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Class(es): traces_dm_list</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time space:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.000, 0.007, 0.015, 0.022 ... 3.000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Condition: comp </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ~&gt;  0.000,  0.027,  0.107,  0.086 ...  0.677 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Condition: incomp </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ~&gt;  0.000,  0.143,  0.087,  0.061 ...  0.676 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># a method is also available for fits_ids_dm objects</span></span></span>
<span class="r-in"><span><span class="co"># (see estimate_model_ids)</span></span></span>
<span class="r-in"><span><span class="co"># get an exemplary fits_ids_dm object</span></span></span>
<span class="r-in"><span><span class="va">fits</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_example_fits.html">get_example_fits</a></span><span class="op">(</span><span class="st">"fits_ids_dm"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">some_traces</span> <span class="op">&lt;-</span> <span class="fu">simulate_traces</span><span class="op">(</span><span class="va">fits</span>, k <span class="op">=</span> <span class="fl">1</span>, seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">some_traces</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Class(es): traces_dm_list</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time space:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.000, 0.007, 0.015, 0.022 ... 3.000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Condition: comp </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ~&gt;  0.000,  0.018,  0.099,  0.085 ...  0.516 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Condition: incomp </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ~&gt;  0.000,  0.164,  0.119,  0.098 ...  0.487 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># we can also print only the traces of one condition</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">some_traces</span><span class="op">$</span><span class="va">comp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ~&gt;  0.000,  0.018,  0.099,  0.085 ...  0.516 </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Valentin Koob, Thomas Richter, Markus Janczyk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

