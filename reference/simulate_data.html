<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate Synthetic Responses — simulate_data • dRiftDM</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate Synthetic Responses — simulate_data"><meta name="description" content="This function simulates data based on the provided model. To this end,
random samples from the predicted PDFs are drawn via approximate inverse CDF
sampling."><meta property="og:description" content="This function simulates data based on the provided model. To this end,
random samples from the predicted PDFs are drawn via approximate inverse CDF
sampling."><meta property="og:image" content="https://bucky2177.github.io/dRiftDM/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dRiftDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/use_ddm_models.html">use_ddm_models</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bucky2177/dRiftDM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate Synthetic Responses</h1>
      <small class="dont-index">Source: <a href="https://github.com/bucky2177/dRiftDM/blob/v0.2.1/R/core_dm.R" class="external-link"><code>R/core_dm.R</code></a></small>
      <div class="d-none name"><code>simulate_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function simulates data based on the provided model. To this end,
random samples from the predicted PDFs are drawn via approximate inverse CDF
sampling.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simulate_data</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'drift_dm'</span></span>
<span><span class="fu">simulate_data</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  <span class="va">n</span>,</span>
<span>  k <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  lower <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  upper <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  df_prms <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>an object inheriting from <a href="drift_dm.html">drift_dm</a>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>further arguments passed on to other functions, including the
function <a href="simulate_values.html">simulate_values</a>. If users want to use a different
distribution than uniform for <a href="simulate_values.html">simulate_values</a>, they must provide
the additional arguments (e.g., <code>means</code> and <code>sds</code>) in a format like
<code>lower/upper</code>.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>numeric, the number of trials per condition to draw. If a single
numeric, then each condition will have <code>n</code> trials. Can be a (named) numeric
vector with the same length as there are conditions to allow a different
number of trials per condition.</p></dd>


<dt id="arg-k">k<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>numeric larger than 0, indicating how many data sets shall
be simulated. If &gt; 1, then it is only effective when specifying
<code>lower/upper</code>.</p></dd>


<dt id="arg-lower-upper">lower, upper<a class="anchor" aria-label="anchor" href="#arg-lower-upper"></a></dt>
<dd><p>vectors or a list, specifying the simulation space for
each parameter of the model (see Details). Only relevant for <code>k &gt; 1</code></p></dd>


<dt id="arg-df-prms">df_prms<a class="anchor" aria-label="anchor" href="#arg-df-prms"></a></dt>
<dd><p>an optional data.frame providing the parameters
that should be used for simulating the data. <code>df_prms</code> must provide column
names matching with (<code>coef(object, select_unique = TRUE)</code>), plus a column
<code>ID</code> that will identify each simulated data set.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>a single numeric, an optional seed for reproducible sampling</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>an integer, indicating if information about the progress
should be displayed. 0 -&gt; no information, 1 -&gt; a progress bar.
Default is 1. Only effective when <code>k &gt; 1</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The return value depends on whether a user specifies <code>lower/upper</code> or
<code>df_prms</code>. If none of these are specified and if <code>k = 1</code>, then a
<a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a> containing the columns <code>RT</code>, <code>Error</code>, and <code>Cond</code> is returned.</p>
<p>If <code>lower/upper</code> or <code>df_prms</code> are provided, then a list with entries
<code>synth_data</code> and <code>prms</code> is returned. The entry <code>synth_data</code> contains a
<a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a>, with the columns <code>RT</code>, <code>&lt;b_column&gt;</code>, <code>Cond</code>, and <code>ID</code> (the name
of the second column, <code>&lt;b_column&gt;</code>, depends on the <a href="b_coding.html">b_coding</a> of the
model object). The entry <code>prms</code> contains a data.frame with an <code>ID</code> column and
the parameters used for simulating each synthetic data set.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>simulate_data</code> is a generic function for simulating data based on
approximate inverse CDF sampling. CDFs are derived from the model's PDFs and
data is drawn by mapping samples from a uniform distribution
(in \([0, 1]\)) to the values of the CDF. Note that sampled response times
will correspond to the values of the time space (i.e., they will correspond
to <code>seq(0, t_max, dt)</code>, see <a href="drift_dm.html">drift_dm</a>).</p>
<p>For <code>drift_dm</code> objects, the behavior of <code>simulate_data</code> depends on <code>k</code>. If
<code>k = 1</code> and no <code>lower/upper</code> or <code>df_prms</code> arguments are supplied, then the
parameters currently set to the model are used to generate
the synthetic data. If <code>k &gt; 1</code>, then <code>k</code> parameter combinations are either
randomly drawn via <a href="simulate_values.html">simulate_values</a> or gathered from the provided
data.frame <code>df_prms</code>, and then data is simulated for each parameter
combination.</p>
<p>When specifying <code>lower/upper</code>, parameter combinations are simulated via
<a href="simulate_values.html">simulate_values</a>. This comes in handy for simple parameter recovery
exercises. If <code>df_prms</code> is specified, then the parameter combinations from
this <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a> is used. Note that the column names in <code>df_prms</code> must match
with the (unique) parameter combinations of the model
(see <code>print(coef(object))</code>)</p><div class="section">
<h3 id="details-on-how-to-specify-lower-upper-">Details on how to specify <code>lower/upper</code>.<a class="anchor" aria-label="anchor" href="#details-on-how-to-specify-lower-upper-"></a></h3>


<p>When users want to simulate data with <code>k &gt; 1</code> and <code>lower/upper</code>, then
parameter values have to be drawn. One great aspect about the
<a href="flex_prms.html">flex_prms</a> object within each <a href="drift_dm.html">drift_dm</a> model, is that
users can easily allow certain parameters to vary freely across conditions.
Consequently, the actual number of parameters varies with the settings of
the <a href="flex_prms.html">flex_prms</a> object. In many cases, however, the simulation space
for a parameter is the same across conditions. For instance, in a model, the
parameter "mu" may vary across the conditions "easy", "medium", or "hard",
but the lower/upper limits are the same across conditions.
To avoid that users always have to re-specify the simulation space via the
<code>lower/upper</code> arguments, the <code>lower</code> and <code>upper</code> arguments refer to the
parameter labels, and <code>dRiftDM</code> figures out how to map these to all
parameters that vary across conditions.</p>
<p>Here is an example: Assume you have the model with parameters
"A" and "B", and the conditions "foo" and "bar". Now assume that "A" is
allowed to vary for "foo" and "bar". Thus, there are actually three
parameters; "A~foo", "A~bar", and "B". <code>dRiftDM</code>, however, can help with
this. If we provide <code>lower = c(A = 1, B = 2)</code>, <code>upper = c(A = 3, B = 4)</code>,
<code>simulate_data</code> checks the model, and creates the vectors
<code>temp_lower = c(1,1,2)</code> and <code>temp_upper = c(3,3,4)</code> as a basis to simulate
the parameters.</p>
<p>Users have three options to specify the simulation space:</p><ul><li><p>Plain numeric vectors (not very much recommended). In this case,
<code>lower/upper</code> must be sorted in accordance with the free parameters in the
<code>flex_prms_obj</code> object (call <code>print(&lt;model&gt;)</code> and have a look at the
<code>Unique Parameters</code> output)</p></li>
<li><p>Named numeric vectors. In this case <code>lower/upper</code> have to provide labels
in accordance with the parameters that are considered "free" at least once
across conditions.</p></li>
<li><p>The most flexible way is when <code>lower/upper</code> are lists. In this case, the
list requires an entry called "default_values" which specifies the named or
plain numeric vectors as above. If the list only contains this entry, then
the behavior is as if <code>lower/upper</code> were already numeric vectors. However,
the <code>lower/upper</code> lists can also provide entries labeled as specific
conditions, which contain named (!) numeric vectors with parameter labels.
This will modify the value for the upper/lower parameter space with respect
to the specified parameters in the respective condition.</p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>A function for <code>fits_ids_dm</code> will be provided in the future.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example 1 ----------------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># get a pre-built model for demonstration</span></span></span>
<span class="r-in"><span><span class="va">a_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="ratcliff_dm.html">ratcliff_dm</a></span><span class="op">(</span>t_max <span class="op">=</span> <span class="fl">1.5</span>, dx <span class="op">=</span> <span class="fl">.005</span>, dt <span class="op">=</span> <span class="fl">.005</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define a lower and upper simulation space</span></span></span>
<span class="r-in"><span><span class="va">lower</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.4</span>, <span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">upper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">0.9</span>, <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># now simulate 5 data sets with each 100 trials</span></span></span>
<span class="r-in"><span><span class="va">data_prms</span> <span class="op">&lt;-</span> <span class="fu">simulate_data</span><span class="op">(</span><span class="va">a_model</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">100</span>, k <span class="op">=</span> <span class="fl">5</span>, lower <span class="op">=</span> <span class="va">lower</span>,</span></span>
<span class="r-in"><span>  upper <span class="op">=</span> <span class="va">upper</span>, seed <span class="op">=</span> <span class="fl">1</span>, verbose <span class="op">=</span> <span class="fl">0</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_prms</span><span class="op">$</span><span class="va">synth_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      RT Error Cond ID</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.595     0 null  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1.290     0 null  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.415     0 null  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.650     0 null  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.915     0 null  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.350     0 null  1</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_prms</span><span class="op">$</span><span class="va">prms</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID      muc         b   non_dec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1 2.327543 0.8491948 0.1823898</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2 2.860619 0.8723376 0.1706227</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3 3.864267 0.7303989 0.3748091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  4 5.541039 0.7145570 0.2536415</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  5 2.008410 0.4308931 0.4079366</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2 ----------------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># more flexibility when defining lists for lower and upper</span></span></span>
<span class="r-in"><span><span class="co"># get a pre-built model, and allow muc to vary across conditions</span></span></span>
<span class="r-in"><span><span class="va">a_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="dmc_dm.html">dmc_dm</a></span><span class="op">(</span>t_max <span class="op">=</span> <span class="fl">1.5</span>, dx <span class="op">=</span> <span class="fl">.005</span>, dt <span class="op">=</span> <span class="fl">.005</span>, instr <span class="op">=</span> <span class="st">"muc ~ "</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define a lower and upper simulation space</span></span></span>
<span class="r-in"><span><span class="co"># let muc vary between 2 and 6, but in incomp conditions, let it vary</span></span></span>
<span class="r-in"><span><span class="co"># between 1 and 4</span></span></span>
<span class="r-in"><span><span class="va">lower</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  default_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    muc <span class="op">=</span> <span class="fl">2</span>, b <span class="op">=</span> <span class="fl">0.4</span>, non_dec <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>    sd_non_dec <span class="op">=</span> <span class="fl">0.01</span>, tau <span class="op">=</span> <span class="fl">0.02</span>, A <span class="op">=</span> <span class="fl">0.05</span>,</span></span>
<span class="r-in"><span>    alpha <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  incomp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>muc <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">upper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  default_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    muc <span class="op">=</span> <span class="fl">6</span>, b <span class="op">=</span> <span class="fl">0.9</span>, non_dec <span class="op">=</span> <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>    sd_non_dec <span class="op">=</span> <span class="fl">0.15</span>, tau <span class="op">=</span> <span class="fl">0.15</span>, A <span class="op">=</span> <span class="fl">0.15</span>,</span></span>
<span class="r-in"><span>    alpha <span class="op">=</span> <span class="fl">7</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  incomp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>muc <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data_prms</span> <span class="op">&lt;-</span> <span class="fu">simulate_data</span><span class="op">(</span><span class="va">a_model</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">100</span>, k <span class="op">=</span> <span class="fl">5</span>, lower <span class="op">=</span> <span class="va">lower</span>,</span></span>
<span class="r-in"><span>  upper <span class="op">=</span> <span class="va">upper</span>, seed <span class="op">=</span> <span class="fl">1</span>, verbose <span class="op">=</span> <span class="fl">0</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">data_prms</span><span class="op">$</span><span class="va">prms</span><span class="op">$</span><span class="va">muc.comp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2.806728 5.632831</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">data_prms</span><span class="op">$</span><span class="va">prms</span><span class="op">$</span><span class="va">muc.incomp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.185359 3.834026</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Valentin Koob, Thomas Richter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

