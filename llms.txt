# dRiftDM

The package dRiftDM was developed to assist psychology researchers in
applying and fitting diffusion models to empirical data within the R
environment. Its most important feature is the ability to handle
non-stationary problems, specifically diffusion models with
time-dependent parameters (such as a drift rate that changes over the
course of a trial). The package includes essential tools for standard
analyses, such as building models, estimating parameters for multiple
participants, and creating/visualizing summary statistics. The pre-built
models available in the package are:

- The Standard **Ratcliff Diffusion Model** (Ratcliff, 1978,
  Psychological Review)
- The **Diffusion Model for Conflict Tasks** (Ulrich et al., 2015,
  Cognitive Psychology)
- The **Shrinking Spotlight Model** (White et al., 2011, Cognitive
  Psychology)

We can flexibly create custom models and utilize the dRiftDM machinery
to estimate them. Variability in the starting point and non-decision
time is generally supported. Variability in the drift rate is also
supported, although it is limited to models with a
time-independent/constant drift rate. Model components for a collapsing
boundary are already pre-built. Demos for model customization are
provided in one of our
[vignettes](https://bucky2177.github.io/dRiftDM/articles/customize_ddms.html).

Model predictions (i.e., first-passage times) are derived by numerically
solving the Kolmogorov-Forward equation (KFE) using a time-adaptive
procedure (i.e., the time-step size is adjusted dynamically and this
leads to substantial speed-up). This is the default, and we currently
recommend keeping it that way.

For backward compatibility, it is also possible to derive the
first-passage-time distribution via a coupled set of integral equations.
However, this method does not yet support adaptive time stepping. Thus,
finer discretization settings are necessary, and it will generally run
slower than the approach based on the KFE.

Mathematical details of both approaches are provided in [Richter et
al.](https://doi.org/10.1016/j.jmp.2023.102756) (2023, *Journal of
Mathematical Psychology*).

## Installation

You can install the development version of dRiftDM from
[GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("bucky2177/dRiftDM")
```

The [CRAN](https://cran.r-project.org/) version can be installed with:

``` r
install.packages("dRiftDM")
```

## Notes

Compared to the initial version 0.1.1, versions \>=0.2.0 make greater
use of the S3 object system. Additionally, beginning with version 0.2.0,
models use `flex_prms` objects to handle parameters across conditions.

In versions \>=0.3.0, we implemented a more efficient KFE-based solver,
which led to a **substantial speed-up**. We also added several new
features:

- different optimization algorithms (including unbounded Nelder-Mead and
  BFGS)
- different cost functions (with the root-mean-square error, RMSE, as an
  alternative to the log-likelihood)
- default parameter ranges for pre-built models
- visualizing the full distribution of a model and calculating basic
  summary statistics
- calculating/visualizing uncertainty intervals via bootstrap-like
  procedures
- fitting a model to aggregated data using the RMSE statistic
- fitting a model via hierarchical and non-hierarchical Bayesian
  estimation (currently experimental and not fully connected to all of
  dRiftDM’s features)

To install one of the older versions (0.1.1, 0.2.1, 0.2.2), you can use:

``` r
devtools::install_github("bucky2177/dRiftDM", ref = "<insert version>")
```

## How to use dRiftDM

If you are interested in getting started with dRiftDM, we recommend
reading the [OSF pre-print](https://osf.io/preprints/osf/3t2vf). More
information on functions and model customization can be found in
dRiftDM’s vignettes. These vignettes are also available from the
“Getting started” and “Articles” tabs on our [Github.io
page](https://bucky2177.github.io/dRiftDM/).

If you have any questions, feel free to contact us!

# Package index

## All functions

- [`` `b_coding<-`() ``](https://bucky2177.github.io/dRiftDM/reference/b_coding.md)
  [`b_coding()`](https://bucky2177.github.io/dRiftDM/reference/b_coding.md)
  : The Coding of the Boundaries

- [`calc_stats()`](https://bucky2177.github.io/dRiftDM/reference/calc_stats.md)
  [`print(`*`<stats_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/calc_stats.md)
  [`print(`*`<stats_dm_list>`*`)`](https://bucky2177.github.io/dRiftDM/reference/calc_stats.md)
  : Calculate Statistics

- [`check_discretization()`](https://bucky2177.github.io/dRiftDM/reference/check_discretization.md)
  : Check time/space discretization via reference comparison

- [`` `coef<-`() ``](https://bucky2177.github.io/dRiftDM/reference/coef.drift_dm.md)
  [`coef(`*`<drift_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/coef.drift_dm.md)
  [`coef(`*`<fits_agg_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/coef.drift_dm.md)
  [`coef(`*`<fits_ids_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/coef.drift_dm.md)
  [`coef(`*`<mcmc_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/coef.drift_dm.md)
  [`print(`*`<coefs_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/coef.drift_dm.md)
  : Access Coefficients of a Model

- [`` `comp_funs<-`() ``](https://bucky2177.github.io/dRiftDM/reference/comp_funs.md)
  [`comp_funs()`](https://bucky2177.github.io/dRiftDM/reference/comp_funs.md)
  : The Component Functions of A Model

- [`component_shelf()`](https://bucky2177.github.io/dRiftDM/reference/component_shelf.md)
  : Diffusion Model Components

- [`` `conds<-`() ``](https://bucky2177.github.io/dRiftDM/reference/conds.md)
  [`conds()`](https://bucky2177.github.io/dRiftDM/reference/conds.md) :
  The Conditions of an Object

- [`` `cost_function<-`() ``](https://bucky2177.github.io/dRiftDM/reference/cost_function.md)
  [`cost_function()`](https://bucky2177.github.io/dRiftDM/reference/cost_function.md)
  [`cost_value()`](https://bucky2177.github.io/dRiftDM/reference/cost_function.md)
  : Access/Replace the Cost Function Label and Access the Cost Function
  Value

- [`` `ddm_opts<-`() ``](https://bucky2177.github.io/dRiftDM/reference/ddm_opts.md)
  [`ddm_opts()`](https://bucky2177.github.io/dRiftDM/reference/ddm_opts.md)
  : Optional Arguments for the Component Functions

- [`dmc_dm()`](https://bucky2177.github.io/dRiftDM/reference/dmc_dm.md)
  : Create the Diffusion Model for Conflict Tasks

- [`dmc_synth_data`](https://bucky2177.github.io/dRiftDM/reference/dmc_synth_data.md)
  : A synthetic data set with two conditions

- [`drift_dm()`](https://bucky2177.github.io/dRiftDM/reference/drift_dm.md)
  [`print(`*`<drift_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/drift_dm.md)
  : Create a drift_dm object

- [`estimate_dm()`](https://bucky2177.github.io/dRiftDM/reference/estimate_dm.md)
  [`print(`*`<fits_agg_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/estimate_dm.md)
  [`print(`*`<fits_ids_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/estimate_dm.md)
  [`print(`*`<mcmc_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/estimate_dm.md)
  : Fit a DDM to Observed Data

- [`estimate_model()`](https://bucky2177.github.io/dRiftDM/reference/estimate_model.md)
  **\[deprecated\]** : Estimate the Parameters of a drift_dm Model

- [`estimate_model_ids()`](https://bucky2177.github.io/dRiftDM/reference/estimate_model_ids.md)
  **\[deprecated\]** : Fit Multiple Individuals and Save Results

- [`` `flex_prms<-`() ``](https://bucky2177.github.io/dRiftDM/reference/flex_prms.md)
  [`flex_prms()`](https://bucky2177.github.io/dRiftDM/reference/flex_prms.md)
  [`print(`*`<flex_prms>`*`)`](https://bucky2177.github.io/dRiftDM/reference/flex_prms.md)
  : Flex_Prms

- [`get_example_fits()`](https://bucky2177.github.io/dRiftDM/reference/get_example_fits.md)
  :

  Auxiliary Function to load a `fits_ids_dm`, `fits_agg_dm`, or
  `mcmc_dm` object

- [`get_lower_upper()`](https://bucky2177.github.io/dRiftDM/reference/get_lower_upper.md)
  : Get Default Parameter Ranges for a Model

- [`hist(`*`<coefs_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/hist.coefs_dm.md)
  : Plot Parameter Distribution(s)

- [`load_fits_ids()`](https://bucky2177.github.io/dRiftDM/reference/load_fits_ids.md)
  **\[deprecated\]** : Load Estimates of a Fit Procedure

- [`logLik(`*`<drift_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/logLik.drift_dm.md)
  : Extract Log-Likelihood for a drift_dm Object

- [`logLik(`*`<fits_ids_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/logLik.fits_ids_dm.md)
  [`AIC(`*`<fits_ids_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/logLik.fits_ids_dm.md)
  [`BIC(`*`<fits_ids_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/logLik.fits_ids_dm.md)
  : Extract Model Statistics for fits_ids_dm Object

- [`modify_flex_prms()`](https://bucky2177.github.io/dRiftDM/reference/modify_flex_prms.md)
  : Set Instructions to a flex_prms object

- [`nobs(`*`<drift_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/nobs.drift_dm.md)
  : Get the Number of Observations for a drift_dm Object

- [`` `obs_data<-`() ``](https://bucky2177.github.io/dRiftDM/reference/obs_data.md)
  [`obs_data()`](https://bucky2177.github.io/dRiftDM/reference/obs_data.md)
  : The Observed Data

- [`pdfs()`](https://bucky2177.github.io/dRiftDM/reference/pdfs.md) :
  Access the Probability Density Functions of a Model

- [`plot(`*`<cafs>`*`)`](https://bucky2177.github.io/dRiftDM/reference/plot.cafs.md)
  : Plot Conditional Accuracy Functions (CAFs)

- [`plot(`*`<delta_funs>`*`)`](https://bucky2177.github.io/dRiftDM/reference/plot.delta_funs.md)
  : Plot Delta Functions

- [`plot(`*`<densities>`*`)`](https://bucky2177.github.io/dRiftDM/reference/plot.densities.md)
  : Plot Distributions of Predicted and Observed Data

- [`plot(`*`<drift_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/plot.drift_dm.md)
  : Plot Components of a Drift Diffusion Model

- [`plot(`*`<mcmc_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/plot.mcmc_dm.md)
  :

  Plot MCMC Results and Diagnostics for `mcmc_dm` Objects

- [`plot(`*`<quantiles>`*`)`](https://bucky2177.github.io/dRiftDM/reference/plot.quantiles.md)
  : Plot Response Time Quantiles

- [`plot(`*`<stats_dm_list>`*`)`](https://bucky2177.github.io/dRiftDM/reference/plot.stats_dm_list.md)
  : Plot Multiple Statistics

- [`plot(`*`<traces_dm_list>`*`)`](https://bucky2177.github.io/dRiftDM/reference/plot.traces_dm_list.md)
  [`plot(`*`<traces_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/plot.traces_dm_list.md)
  : Plot Traces of a Drift Diffusion Model

- [`` `prms_solve<-`() ``](https://bucky2177.github.io/dRiftDM/reference/prms_solve.md)
  [`prms_solve()`](https://bucky2177.github.io/dRiftDM/reference/prms_solve.md)
  : The Parameters for Deriving Model Predictions

- [`ratcliff_dm()`](https://bucky2177.github.io/dRiftDM/reference/ratcliff_dm.md)
  : Create a Basic Diffusion Model

- [`ratcliff_synth_data`](https://bucky2177.github.io/dRiftDM/reference/ratcliff_synth_data.md)
  : A synthetic data set with one condition

- [`re_evaluate_model()`](https://bucky2177.github.io/dRiftDM/reference/re_evaluate_model.md)
  : Re-evaluate the model

- [`simulate_data()`](https://bucky2177.github.io/dRiftDM/reference/simulate_data.md)
  : Simulate Synthetic Responses

- [`simulate_traces()`](https://bucky2177.github.io/dRiftDM/reference/simulate_traces.md)
  [`print(`*`<traces_dm_list>`*`)`](https://bucky2177.github.io/dRiftDM/reference/simulate_traces.md)
  [`print(`*`<traces_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/simulate_traces.md)
  : Simulate Trajectories/Traces of a Model

- [`simulate_traces_one_cond()`](https://bucky2177.github.io/dRiftDM/reference/simulate_traces_one_cond.md)
  : Simulate Traces for One Conditions

- [`simulate_values()`](https://bucky2177.github.io/dRiftDM/reference/simulate_values.md)
  : Simulate Values

- [`` `solver<-`() ``](https://bucky2177.github.io/dRiftDM/reference/solver.md)
  [`solver()`](https://bucky2177.github.io/dRiftDM/reference/solver.md)
  : The Solver for Deriving Model Predictions

- [`ssp_dm()`](https://bucky2177.github.io/dRiftDM/reference/ssp_dm.md)
  : Create the Shrinking Spotlight Model

- [`ssp_synth_data`](https://bucky2177.github.io/dRiftDM/reference/ssp_synth_data.md)
  : A synthetic data set with two conditions

- [`summary(`*`<coefs_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.coefs_dm.md)
  [`print(`*`<summary.coefs_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.coefs_dm.md)
  :

  Summary for `coefs_dm` Objects

- [`summary(`*`<drift_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.drift_dm.md)
  [`print(`*`<summary.drift_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.drift_dm.md)
  :

  Summary for `drift_dm` objects

- [`print(`*`<summary.fits_agg_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.fits_agg_dm.md)
  [`summary(`*`<fits_agg_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.fits_agg_dm.md)
  :

  Summary and Printing for `fits_agg_dm` Objects

- [`print(`*`<summary.fits_ids_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.fits_ids_dm.md)
  [`summary(`*`<fits_ids_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.fits_ids_dm.md)
  : Summary and Printing for fits_ids_dm Objects

- [`summary(`*`<flex_prms>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.flex_prms.md)
  [`print(`*`<summary.flex_prms>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.flex_prms.md)
  : Summarizing Flex Parameters

- [`summary(`*`<mcmc_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.mcmc_dm.md)
  [`print(`*`<summary.mcmc_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.mcmc_dm.md)
  :

  Summary for `mcmc_dm` Objects

- [`summary(`*`<stats_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`summary(`*`<basic_stats>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`summary(`*`<cafs>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`summary(`*`<quantiles>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`summary(`*`<delta_funs>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`summary(`*`<fit_stats>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`summary(`*`<sum_dist>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`summary(`*`<stats_dm_list>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`print(`*`<summary.stats_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`print(`*`<summary.basic_stats>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`print(`*`<summary.cafs>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`print(`*`<summary.quantiles>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`print(`*`<summary.delta_funs>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`print(`*`<summary.fit_stats>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`print(`*`<summary.sum_dist>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  [`print(`*`<summary.stats_dm_list>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.stats_dm.md)
  :

  Summary for `stats_dm` Objects

- [`summary(`*`<traces_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.traces_dm.md)
  [`print(`*`<summary.traces_dm>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.traces_dm.md)
  [`summary(`*`<traces_dm_list>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.traces_dm.md)
  [`print(`*`<summary.traces_dm_list>`*`)`](https://bucky2177.github.io/dRiftDM/reference/summary.traces_dm.md)
  : Summary for traces_dm and traces_dm_list Objects

- [`ulrich_flanker_data`](https://bucky2177.github.io/dRiftDM/reference/ulrich_flanker_data.md)
  : Exemplary Flanker Data

- [`ulrich_simon_data`](https://bucky2177.github.io/dRiftDM/reference/ulrich_simon_data.md)
  : Exemplary Simon Data

- [`unpack_obj()`](https://bucky2177.github.io/dRiftDM/reference/unpack_obj.md)
  : Unpack/Destroy dRiftDM Objects

- [`unpack_traces()`](https://bucky2177.github.io/dRiftDM/reference/unpack_traces.md)
  **\[deprecated\]** : Unpack/Destroy Traces Objects

# Articles

### All vignettes

- [How to Convert DMC's
  parameters](https://bucky2177.github.io/dRiftDM/articles/convert_dmc_parameters.md):
- [How To Customize
  DDMs](https://bucky2177.github.io/dRiftDM/articles/customize_ddms.md):
- [Introduction to
  dRiftDM](https://bucky2177.github.io/dRiftDM/articles/dRiftDM.md):
- [How To Perform a Model
  Recovery](https://bucky2177.github.io/dRiftDM/articles/model_recovery.md):
- [Core DDM Parameters: Impact on RTs and
  Accuracy](https://bucky2177.github.io/dRiftDM/articles/predictions_simple_ddm.md):
